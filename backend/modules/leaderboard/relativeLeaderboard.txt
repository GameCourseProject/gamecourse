[
  {
    "type": "block",
    "role": "role.Default",
    "class": "leaderboard",
    "visibilityType": "visible",
    "children": [
      [
        {
          "type": "header",
          "role": "role.Default",
          "visibilityType": "visible",
          "image": [
            {
              "type": "image",
              "role": "role.Default",
              "visibilityType": "visible",
              "src": "modules/leaderboard/imgs/leaderboard.svg"
            }
          ],
          "title": [
            {
              "type": "text",
              "role": "role.Default",
              "visibilityType": "visible",
              "value": "Leaderboard"
            }
          ]
        }
      ],
      [
        {
          "type": "table",
          "role": "role.Default",
          "class": "leaderboard-table",
          "visibilityType": "visible",
          "rows": [
            [
              {
                "type": "row",
                "role": "role.Default",
                "visibilityType": "visible",
                "loopData": "{users.getAllUsers(\"student\", %course).sort(\"descending\", \"xp.getXP(%item); badges.getBadgesCount(%item)\").sort(\"ascending\", \"%item.studentNumber\").getKNeighbors(%viewer, 3)}",
                "variables": {
                  "userXP": {
                    "value": "{xp.getXP(%item)}"
                  }
                },
                "children": [
                  [
                    {
                      "type": "text",
                      "role": "role.Default",
                      "visibilityType": "visible",
                      "value": "{%item.rank + 1}"
                    }
                  ],
                  [
                    {
                      "type": "image",
                      "role": "role.Default",
                      "class": "leaderboard-img",
                      "visibilityType": "visible",
                      "src": "{%item.picture}"
                    }
                  ],
                  [
                    {
                      "type": "text",
                      "role": "role.Default",
                      "visibilityType": "visible",
                      "value": "{%item.name}"
                    }
                  ]
                ]
              }
            ]
          ]
        }
      ]
    ]
  }
]