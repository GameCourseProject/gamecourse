[
  {
    "type": "block",
    "role": "role.Student>role.Default",
    "class": "profile",
    "visibilityType": "visible",
    "variables": {
      "userData": {
        "value": "{users.getUser(%user)}"
      }
    },
    "children": [
      [
        {
          "type": "block",
          "role": "role.Student>role.Default",
          "class": "profile-summary",
          "visibilityType": "visible",
          "children": [
            [
              {
                "type": "header",
                "role": "role.Student>role.Default",
                "visibilityType": "visible",
                "image": [
                  {
                    "type": "image",
                    "role": "role.Student>role.Default",
                    "visibilityType": "visible",
                    "src": "modules/profile/icon.svg"
                  }
                ],
                "title": [
                  {
                    "type": "text",
                    "role": "role.Student>role.Default",
                    "visibilityType": "visible",
                    "value": "Profile"
                  }
                ]
              }
            ],
            [
              {
                "type": "block",
                "role": "role.Student>role.Default",
                "class": "profile-summary-blocks",
                "visibilityType": "visible",
                "children": [
                  [
                    {
                      "type": "block",
                      "role": "role.Student>role.Default",
                      "class": "profile-details profile-summary-block",
                      "visibilityType": "visible",
                      "children": [
                        [
                          {
                            "type": "header",
                            "role": "role.Student>role.Default",
                            "visibilityType": "visible",
                            "image": [
                              {
                                "type": "image",
                                "role": "role.Student>role.Default",
                                "visibilityType": "visible",
                                "src": "{%userData.picture}"
                              }
                            ],
                            "title": [
                              {
                                "type": "text",
                                "role": "role.Student>role.Default",
                                "visibilityType": "visible",
                                "value": "{%userData.name} - {%userData.studentNumber}"
                              }
                            ]
                          }
                        ],
                        [
                          {
                            "type": "table",
                            "role": "role.Student>role.Default",
                            "visibilityType": "visible",
                            "rows": [
                              [
                                {
                                  "type": "row",
                                  "role": "role.Student>role.Default",
                                  "visibilityType": "visible",
                                  "children": [
                                    [
                                      {
                                        "type": "text",
                                        "role": "role.Student>role.Default",
                                        "visibilityType": "visible",
                                        "value": "Level"
                                      }
                                    ],
                                    [
                                      {
                                        "type": "text",
                                        "role": "role.Student>role.Default",
                                        "visibilityType": "visible",
                                        "variables": {
                                          "level": {
                                            "value": "{xp.getLevel(%user)}"
                                          }
                                        },
                                        "value": "{%level.number} - {%level.description}"
                                      }
                                    ]
                                  ]
                                }
                              ],
                              [
                                {
                                  "type": "row",
                                  "role": "role.Student>role.Default",
                                  "visibilityType": "visible",
                                  "children": [
                                    [
                                      {
                                        "type": "text",
                                        "role": "role.Student>role.Default",
                                        "visibilityType": "visible",
                                        "value": "XP"
                                      }
                                    ],
                                    [
                                      {
                                        "type": "text",
                                        "role": "role.Student>role.Default",
                                        "visibilityType": "visible",
                                        "value": "{xp.getXP(%user)}"
                                      }
                                    ]
                                  ]
                                }
                              ],
                              [
                                {
                                  "type": "row",
                                  "role": "role.Student>role.Default",
                                  "visibilityType": "visible",
                                  "children": [
                                    [
                                      {
                                        "type": "text",
                                        "role": "role.Student>role.Default",
                                        "visibilityType": "visible",
                                        "value": "Badges"
                                      }
                                    ],
                                    [
                                      {
                                        "type": "text",
                                        "role": "role.Student>role.Default",
                                        "visibilityType": "visible",
                                        "value": "{xp.getBadgesXP(%user)}"
                                      }
                                    ]
                                  ]
                                }
                              ],
                              [
                                {
                                  "type": "row",
                                  "role": "role.Student>role.Default",
                                  "visibilityType": "visible",
                                  "children": [
                                    [
                                      {
                                        "type": "text",
                                        "role": "role.Student>role.Default",
                                        "visibilityType": "visible",
                                        "value": "Skills"
                                      }
                                    ],
                                    [
                                      {
                                        "type": "text",
                                        "role": "role.Student>role.Default",
                                        "visibilityType": "visible",
                                        "value": "TODO"
                                      }
                                    ]
                                  ]
                                }
                              ],
                              [
                                {
                                  "type": "row",
                                  "role": "role.Student>role.Default",
                                  "visibilityType": "visible",
                                  "children": [
                                    [
                                      {
                                        "type": "text",
                                        "role": "role.Student>role.Default",
                                        "visibilityType": "visible",
                                        "value": "Major"
                                      }
                                    ],
                                    [
                                      {
                                        "type": "text",
                                        "role": "role.Student>role.Default",
                                        "visibilityType": "visible",
                                        "value": "{%userData.major}"
                                      }
                                    ]
                                  ]
                                }
                              ]
                            ]
                          }
                        ]
                      ]
                    }
                  ],
                  [
                    {
                      "type": "block",
                      "role": "role.Student>role.Default",
                      "class": "profile-latest-awards profile-summary-block",
                      "visibilityType": "visible",
                      "children": [
                        [
                          {
                            "type": "header",
                            "role": "role.Student>role.Default",
                            "visibilityType": "visible",
                            "image": [
                              {
                                "type": "image",
                                "role": "role.Student>role.Default",
                                "visibilityType": "visible",
                                "src": "modules/awardlist/icon.svg"
                              }
                            ],
                            "title": [
                              {
                                "type": "text",
                                "role": "role.Student>role.Default",
                                "visibilityType": "visible",
                                "value": "Latest Awards"
                              }
                            ]
                          }
                        ],
                        [
                          {
                            "type": "table",
                            "role": "role.Student>role.Default",
                            "visibilityType": "visible",
                            "rows": [
                              [
                                {
                                  "type": "row",
                                  "role": "role.Student>role.Default",
                                  "visibilityType": "visible",
                                  "loopData": "{awards.getAllAwards(%user).sort(\"descending\", \"date\").crop(0, 2)}",
                                  "variables": {
                                    "award": {
                                      "value": "{%item}"
                                    }
                                  },
                                  "children": [
                                    [
                                      {
                                        "type": "image",
                                        "role": "role.Student>role.Default",
                                        "class": "profile-latest-award-img",
                                        "visibilityType": "visible",
                                        "src": "{%award.renderPicture(\"type\")}"
                                      }
                                    ],
                                    [
                                      {
                                        "type": "text",
                                        "role": "role.Student>role.Default",
                                        "visibilityType": "visible",
                                        "value": "{%award.description}"
                                      }
                                    ],
                                    [
                                      {
                                        "type": "text",
                                        "role": "role.Student>role.Default",
                                        "visibilityType": "visible",
                                        "value": "{%award.reward} XP"
                                      }
                                    ]
                                  ]
                                }
                              ]
                            ]
                          }
                        ]
                      ]
                    }
                  ],
                  [
                    {
                      "type": "block",
                      "role": "role.Student>role.Default",
                      "class": "profile-xp-overview profile-summary-block",
                      "visibilityType": "visible",
                      "children": [
                        [
                          {
                            "type": "header",
                            "role": "role.Student>role.Default",
                            "visibilityType": "visible",
                            "image": [
                              {
                                "type": "image",
                                "role": "role.Student>role.Default",
                                "visibilityType": "visible",
                                "src": "modules/charts/icon.svg"
                              }
                            ],
                            "title": [
                              {
                                "type": "text",
                                "role": "role.Student>role.Default",
                                "visibilityType": "visible",
                                "value": "XP Overview"
                              }
                            ]
                          }
                        ],
                        [
                          {
                            "type": "chart",
                            "role": "role.Student>role.Default",
                            "visibilityType": "visible",
                            "chartType": "star",
                            "info": {
                              "provider": "starPlot",
                              "params": [
                                {
                                  "id": "presentationXP",
                                  "label": "Presentation",
                                  "max": "3000"
                                },
                                {
                                  "id": "labXP",
                                  "label": "Labs",
                                  "max": "3000"
                                },
                                {
                                  "id": "badgeXP",
                                  "label": "Badges",
                                  "max": "4000"
                                },
                                {
                                  "id": "skillXP",
                                  "label": "Skills",
                                  "max": "5000"
                                },
                                {
                                  "id": "quizXP",
                                  "label": "Quiz",
                                  "max": "6000"
                                }
                              ]
                            }
                          }
                        ]
                      ]
                    }
                  ],
                  [
                    {
                      "type": "block",
                      "role": "role.Student>role.Default",
                      "class": "profile-xp-evolution profile-summary-block",
                      "visibilityType": "visible",
                      "children": [
                        [
                          {
                            "type": "header",
                            "role": "role.Student>role.Default",
                            "visibilityType": "visible",
                            "image": [
                              {
                                "type": "image",
                                "role": "role.Student>role.Default",
                                "visibilityType": "visible",
                                "src": "modules/charts/icon.svg"
                              }
                            ],
                            "title": [
                              {
                                "type": "text",
                                "role": "role.Student>role.Default",
                                "visibilityType": "visible",
                                "value": "XP Evolution"
                              }
                            ]
                          }
                        ],
                        [
                          {
                            "type": "chart",
                            "role": "role.Student>role.Default",
                            "visibilityType": "visible",
                            "chartType": "line",
                            "info": {
                              "provider": "xpEvolution"
                            }
                          }
                        ]
                      ]
                    }
                  ],
                  [
                    {
                      "type": "block",
                      "role": "role.Student>role.Default",
                      "class": "profile-summary-block profile-leaderboard-evolutio",
                      "visibilityType": "visible",
                      "children": [
                        [
                          {
                            "type": "header",
                            "role": "role.Student>role.Default",
                            "visibilityType": "visible",
                            "image": [
                              {
                                "type": "image",
                                "role": "role.Student>role.Default",
                                "visibilityType": "visible",
                                "src": "modules/charts/icon.svg"
                              }
                            ],
                            "title": [
                              {
                                "type": "text",
                                "role": "role.Student>role.Default",
                                "visibilityType": "visible",
                                "value": "Leaderboard Evolution"
                              }
                            ]
                          }
                        ],
                        [
                          {
                            "type": "chart",
                            "role": "role.Student>role.Default",
                            "visibilityType": "visible",
                            "chartType": "line",
                            "info": {
                              "provider": "leaderboardEvolution"
                            }
                          }
                        ]
                      ]
                    }
                  ],
                  [
                    {
                      "type": "block",
                      "role": "role.Student>role.Default",
                      "class": "profile-summary-block profile-xp-world",
                      "visibilityType": "visible",
                      "children": [
                        [
                          {
                            "type": "header",
                            "role": "role.Student>role.Default",
                            "visibilityType": "visible",
                            "image": [
                              {
                                "type": "image",
                                "role": "role.Student>role.Default",
                                "visibilityType": "visible",
                                "src": "modules/charts/icon.svg"
                              }
                            ],
                            "title": [
                              {
                                "type": "text",
                                "role": "role.Student>role.Default",
                                "visibilityType": "visible",
                                "value": "Your XP and the world's..."
                              }
                            ]
                          }
                        ],
                        [
                          {
                            "type": "chart",
                            "role": "role.Student>role.Default",
                            "visibilityType": "visible",
                            "chartType": "bar",
                            "info": {
                              "provider": "xpWorld"
                            }
                          }
                        ]
                      ]
                    }
                  ],
                  [
                    {
                      "type": "block",
                      "role": "role.Student>role.Default",
                      "class": "profile-summary-block profile-badge-world last",
                      "visibilityType": "visible",
                      "children": [
                        [
                          {
                            "type": "header",
                            "role": "role.Student>role.Default",
                            "visibilityType": "visible",
                            "image": [
                              {
                                "type": "image",
                                "role": "role.Student>role.Default",
                                "visibilityType": "visible",
                                "src": "modules/charts/icon.svg"
                              }
                            ],
                            "title": [
                              {
                                "type": "text",
                                "role": "role.Student>role.Default",
                                "visibilityType": "visible",
                                "value": "Your Badges and the world's..."
                              }
                            ]
                          }
                        ],
                        [
                          {
                            "type": "chart",
                            "role": "role.Student>role.Default",
                            "visibilityType": "visible",
                            "chartType": "bar",
                            "info": {
                              "provider": ""
                            }
                          }
                        ]
                      ]
                    }
                  ]
                ]
              }
            ]
          ]
        }
      ],
      [
        {
          "type": "block",
          "role": "role.Student>role.Default",
          "class": "badges-list",
          "visibilityType": "visible",
          "children": [
            [
              {
                "type": "header",
                "role": "role.Student>role.Default",
                "visibilityType": "visible",
                "image": [
                  {
                    "type": "image",
                    "role": "role.Student>role.Default",
                    "visibilityType": "visible",
                    "src": "modules/badges/icon.svg"
                  }
                ],
                "title": [
                  {
                    "type": "text",
                    "role": "role.Student>role.Default",
                    "visibilityType": "visible",
                    "value": "Badges ({badges.getBadgesCount(%user)} out of {badges.getBadgesCount()}, {xp.getBadgesXP(%user)} XP)"
                  }
                ]
              }
            ],
            [
              {
                "type": "block",
                "role": "role.Student>role.Default",
                "class": "badge",
                "visibilityType": "visible",
                "loopData": "{badges.getAllBadges().sort(\"ascending\",\"name\")}",
                "variables": {
                  "levels": {
                    "value": "{%item.levels}"
                  },
                  "badgeLvl": {
                    "value": "{%item.currLevel(%user)}"
                  },
                  "badgeParticipations": {
                    "value": "{badges.badgeProgression(%item.id, %viewer)}"
                  },
                  "badge": {
                    "value": "{%item}"
                  },
                  "badgeIndex": {
                    "value": "{%index}"
                  }
                },
                "events": {
                  "click": "{actions.toggleView(\"badge-\"+%index)}"
                },
                "children": [
                  [
                    {
                      "type": "block",
                      "role": "role.Student>role.Default",
                      "class": "badge-top",
                      "visibilityType": "visible",
                      "children": [
                        [
                          {
                            "type": "block",
                            "role": "role.Student>role.Default",
                            "class": "badge-top-left",
                            "visibilityType": "visible",
                            "children": [
                              [
                                {
                                  "type": "block",
                                  "role": "role.Student>role.Default",
                                  "class": "badge-imgs",
                                  "visibilityType": "visible",
                                  "loopData": "{%levels}",
                                  "variables": {
                                    "level": {
                                      "value": "{%item}"
                                    }
                                  },
                                  "children": [
                                    [
                                      {
                                        "type": "image",
                                        "role": "role.Student>role.Default",
                                        "class": "badge-img",
                                        "visibilityType": "conditional",
                                        "visibilityCondition": "{%level.number <= %badgeLvl.number}",
                                        "src": "{%badge.renderPicture(%level.number)}"
                                      }
                                    ],
                                    [
                                      {
                                        "type": "image",
                                        "role": "role.Student>role.Default",
                                        "class": "badge-img",
                                        "visibilityType": "conditional",
                                        "visibilityCondition": "{%level.number>%badgeLvl.number}",
                                        "src": "modules/badges/imgs/blank.png"
                                      }
                                    ]
                                  ]
                                }
                              ],
                              [
                                {
                                  "type": "block",
                                  "role": "role.Student>role.Default",
                                  "class": "badge-info",
                                  "visibilityType": "visible",
                                  "children": [
                                    [
                                      {
                                        "type": "text",
                                        "role": "role.Student>role.Default",
                                        "class": " badge-title",
                                        "visibilityType": "visible",
                                        "value": "{%badge.name} - level {%badgeLvl.number}"
                                      }
                                    ],
                                    [
                                      {
                                        "type": "text",
                                        "role": "role.Student>role.Default",
                                        "class": " badge-description",
                                        "visibilityType": "visible",
                                        "value": "{%badge.description}"
                                      }
                                    ],
                                    [
                                      {
                                        "type": "block",
                                        "role": "role.Student>role.Default",
                                        "class": "badge-level-info",
                                        "visibilityType": "visible",
                                        "children": [
                                          [
                                            {
                                              "type": "text",
                                              "role": "role.Student>role.Default",
                                              "class": "level-description ",
                                              "visibilityType": "conditional",
                                              "visibilityCondition": "{%badgeLvl.number < %badge.maxLevel}",
                                              "value": "Level {%badgeLvl.nextLevel.number}: {%badgeLvl.nextLevel.description}"
                                            }
                                          ],
                                          [
                                            {
                                              "type": "text",
                                              "role": "role.Student>role.Default",
                                              "class": "level-count ",
                                              "visibilityType": "conditional",
                                              "visibilityCondition": "{%badge.isCount}",
                                              "value": "[{%badgeParticipations.count} so far]"
                                            }
                                          ],
                                          [
                                            {
                                              "type": "text",
                                              "role": "role.Student>role.Default",
                                              "class": " level-post",
                                              "visibilityType": "conditional",
                                              "visibilityCondition": "{!%badge.isCount && %badge.isPost}",
                                              "value": "[Post]"
                                            }
                                          ]
                                        ]
                                      }
                                    ]
                                  ]
                                }
                              ]
                            ]
                          }
                        ],
                        [
                          {
                            "type": "block",
                            "role": "role.Student>role.Default",
                            "class": "badge-top-right",
                            "visibilityType": "visible",
                            "children": [
                              [
                                {
                                  "type": "text",
                                  "role": "role.Student>role.Default",
                                  "class": " badge-reward ",
                                  "visibilityType": "conditional",
                                  "visibilityCondition": "{%badgeLvl.nextLevel.number <= %badge.maxLevel && %badgeLvl.nextLevel.reward > 0}",
                                  "value": "{%badgeLvl.nextLevel.reward} XP"
                                }
                              ],
                              [
                                {
                                  "type": "text",
                                  "role": "role.Student>role.Default",
                                  "class": " badge-extra-credit",
                                  "visibilityType": "conditional",
                                  "visibilityCondition": "{%badge.isExtra}",
                                  "value": "extra credit"
                                }
                              ],
                              [
                                {
                                  "type": "text",
                                  "role": "role.Student>role.Default",
                                  "class": " badge-bragging-rights",
                                  "visibilityType": "conditional",
                                  "visibilityCondition": "{%item.isBragging}",
                                  "value": "bragging rights"
                                }
                              ]
                            ]
                          }
                        ]
                      ]
                    }
                  ],
                  [
                    {
                      "type": "block",
                      "role": "role.Student>role.Default",
                      "class": "badge-bottom",
                      "label": "badge-{%badgeIndex}",
                      "visibilityType": "invisible",
                      "children": [
                        [
                          {
                            "type": "text",
                            "role": "role.Student>role.Default",
                            "class": " badge-indicator",
                            "visibilityType": "visible",
                            "loopData": "{%badgeParticipations}",
                            "variables": {
                              "participation": {
                                "value": "{%item}"
                              }
                            },
                            "value": "{%participation.description}"
                          }
                        ],
                        [
                          {
                            "type": "block",
                            "role": "role.Student>role.Default",
                            "class": "badge-levels",
                            "visibilityType": "visible",
                            "loopData": "{%levels}",
                            "variables": {
                              "level": {
                                "value": "{%item}"
                              }
                            },
                            "children": [
                              [
                                {
                                  "type": "text",
                                  "role": "role.Student>role.Default",
                                  "class": " badge-level",
                                  "visibilityType": "visible",
                                  "value": "Level {%level.number}: {%level.description} - {%level.reward} XP"
                                }
                              ],
                              [
                                {
                                  "type": "image",
                                  "role": "role.Student>role.Default",
                                  "class": "badge-level-student-img",
                                  "visibilityType": "visible",
                                  "loopData": "{users.getUsersWithBadge(%badge, %level)}",
                                  "variables": {
                                    "badgeUser": {
                                      "value": "{%item}"
                                    }
                                  },
                                  "events": {
                                    "click": "{actions.goToPage(4, %badgeUser.id)}"
                                  },
                                  "src": "{%badgeUser.picture}"
                                }
                              ],
                              [
                                {
                                  "type": "text",
                                  "role": "role.Student>role.Default",
                                  "visibilityType": "conditional",
                                  "visibilityCondition": "{badges.doesntHaveBadge(%badge, %level)}",
                                  "value": "No one reached this level. Be the first!"
                                }
                              ]
                            ]
                          }
                        ]
                      ]
                    }
                  ]
                ]
              }
            ]
          ]
        }
      ],
      [
        {
          "type": "block",
          "role": "role.Student>role.Default",
          "class": "awards-list",
          "visibilityType": "visible",
          "children": [
            [
              {
                "type": "header",
                "role": "role.Student>role.Default",
                "visibilityType": "visible",
                "image": [
                  {
                    "type": "image",
                    "role": "role.Student>role.Default",
                    "visibilityType": "visible",
                    "src": "modules/awardlist/icon.svg"
                  }
                ],
                "title": [
                  {
                    "type": "text",
                    "role": "role.Student>role.Default",
                    "visibilityType": "visible",
                    "value": "Awards List"
                  }
                ]
              }
            ],
            [
              {
                "type": "table",
                "role": "role.Student>role.Default",
                "visibilityType": "visible",
                "headerRows": [
                  [
                    {
                      "type": "row",
                      "role": "role.Student>role.Default",
                      "visibilityType": "visible",
                      "children": [
                        [
                          {
                            "type": "text",
                            "role": "role.Student>role.Default",
                            "visibilityType": "visible",
                            "value": "Experience"
                          }
                        ],
                        [
                          {
                            "type": "text",
                            "role": "role.Student>role.Default",
                            "visibilityType": "visible",
                            "value": "Date"
                          }
                        ],
                        [
                          {
                            "type": "text",
                            "role": "role.Student>role.Default",
                            "visibilityType": "visible",
                            "value": "Description"
                          }
                        ]
                      ]
                    }
                  ]
                ],
                "rows": [
                  [
                    {
                      "type": "row",
                      "role": "role.Student>role.Default",
                      "visibilityType": "visible",
                      "loopData": "{awards.getAllAwards(%user).sort(\"descending\", \"date\")}",
                      "variables": {
                        "award": {
                          "value": "{%item}"
                        }
                      },
                      "children": [
                        [
                          {
                            "type": "text",
                            "role": "role.Student>role.Default",
                            "visibilityType": "visible",
                            "value": "{%award.reward} XP"
                          }
                        ],
                        [
                          {
                            "type": "text",
                            "role": "role.Student>role.Default",
                            "visibilityType": "visible",
                            "value": "{%award.date}"
                          }
                        ],
                        [
                          {
                            "type": "block",
                            "role": "role.Student>role.Default",
                            "class": "award-description",
                            "visibilityType": "visible",
                            "children": [
                              [
                                {
                                  "type": "text",
                                  "role": "role.Student>role.Default",
                                  "visibilityType": "visible",
                                  "value": "{%award.description}"
                                }
                              ],
                              [
                                {
                                  "type": "image",
                                  "role": "role.Student>role.Default",
                                  "class": "award-description-img",
                                  "visibilityType": "visible",
                                  "src": "{%award.renderPicture(\"type\")}"
                                }
                              ]
                            ]
                          }
                        ]
                      ]
                    }
                  ]
                ]
              }
            ]
          ]
        }
      ]
    ]
  }
]