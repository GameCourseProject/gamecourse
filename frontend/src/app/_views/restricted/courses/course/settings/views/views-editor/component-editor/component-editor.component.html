<ng-container *ngIf="viewToEdit.type !== ViewType.TABLE" [ngTemplateOutlet]="GENERIC_EDITOR"></ng-container>
<ng-container *ngIf="viewToEdit.type === ViewType.TABLE" [ngTemplateOutlet]="TABLE_EDITOR"></ng-container>


<!--------------------------------------------------->
<!----- EDITOR FOR TEXT, BUTTONS, BLOCKS, ETC. ------>
<!--------------------------------------------------->

<ng-template #GENERIC_EDITOR>
<div class="overflow-x-hidden">
  
  <app-input-select
    *ngIf="viewToEdit.type !== ViewType.ROW"
    [id]="'type'"
    [(value)]="viewToEdit.type"
    [options]="getComponentTypes()"
    [placeholder]="'Select component type'"
    [topLabel]="'Component Type'"
    [required]="true"
    [classList]="'mb-4'">
  </app-input-select>
  <!--------------------- Button options --------------------->
  <ng-container *ngIf="viewToEdit.type === ViewType.BUTTON">
    <div class="flex flex-row mt-2 justify-start items-center gap-2">
      <app-simple-helper [position]="'right'" [text]="'Text that will be displayed'"></app-simple-helper>
      <span class="block font-semibold text-mg">Text</span>
    </div>
    <div class="text-xs pl-1 pb-2">
      You can either write ordinary text or write expressions to define the following field.<br>
      To write expressions, make sure you encapsulate them with curly brackets: {{ '{' }} {{ '}' }}
      For more information check the 'Additional Tools' box.
    </div>
    <app-input-text
      [id]="'visibility-condition-expression'"
      [(value)]="viewToEdit.text"
      [placeholder]="'e.g. { courses.getCourseById(%course).name }, \'click to see badges\', ...'"
      [required]="false">
    </app-input-text>
    <div class="flex md:flex-row flex-col mt-2">
      <div class="md:w-1/2">
        <div class="flex flex-row mt-2 justify-start items-center gap-2">
          <app-simple-helper [position]="'right'" [text]="'Icon that will be displayed in button alongside the text'"></app-simple-helper>
          <span class="block font-semibold text-mg">Want to Add an Icon?</span>
        </div>
        <div class="flex flex-wrap">
          <div *ngFor="let icon of getIcons()" class="btn btn-ghost -py-2 px-1" (click)="selectIcon(icon, false)" [ngClass]="{'outline outline-2 outline-primary': this.viewToEdit.icon == icon}">
            <ng-icon [name]="icon" [size]="'1.8rem'"></ng-icon>
          </div>
        </div>
      </div>
    
      <div class="grow">
        <app-input-color
          [id]="'button-color'"
          [(value)]="viewToEdit.color"
          [placeholder]="'Button Color'"
          [topLabel]="'Color'"
          [helperText]="'Choose color for the button'"
          [helperPosition]="'right'">
        </app-input-color>
      </div>
    </div>
  </ng-container>

  <!--------------------- Text options --------------------->
  <ng-container *ngIf="viewToEdit.type === ViewType.TEXT">
    <div class="text-xs pl-1 pb-2">
      You can either write ordinary text or write expressions to define the following fields.<br>
      To write expressions, make sure you encapsulate them with curly brackets: {{ '{' }} {{ '}' }}
      For more information check the 'Additional Tools' box.
    </div>
    <div class="flex flex-row gap-10">
      <div class="flex flex-col grow">
        <div class="flex flex-row mt-2 justify-start items-center gap-2">
          <app-simple-helper [position]="'right'" [text]="'Text that will be displayed'"></app-simple-helper>
          <span class="block font-semibold text-lg">Text</span>
        </div>
        <app-input-text
          [id]="'component-text'"
          [(value)]="viewToEdit.text"
          [required]="false">
        </app-input-text>
      </div>
      <div class="flex flex-col grow">
        <div class="flex flex-row mt-2 justify-start items-center gap-2">
          <app-simple-helper [position]="'right'" [text]="'Enables link when clicked'"></app-simple-helper>
          <span class="block font-semibold text-lg">Link</span>
        </div>
        <app-input-text
          [id]="'component-link'"
          [(value)]="viewToEdit.link"
          [required]="false">
        </app-input-text>
      </div>
    </div>
  </ng-container>

  <!--------------------- Image options --------------------->
  <ng-container *ngIf="viewToEdit.type === ViewType.IMAGE">
    <div class="text-xs pl-1 pb-2">
      You can either write ordinary text or write expressions to define the following fields.<br>
      To write expressions, make sure you encapsulate them with curly brackets: {{ '{' }} {{ '}' }}
      For more information check the 'Additional Tools' box.
    </div>
    <div class="flex flex-row gap-10">
      <div class="flex flex-col grow">
        <div class="flex flex-row mt-2 justify-start items-center gap-2">
          <app-simple-helper [position]="'right'" [text]="'Source of the image that will be displayed'"></app-simple-helper>
          <span class="block font-semibold text-lg">Source</span>
        </div>
        <app-input-text
          [id]="'component-source'"
          [(value)]="viewToEdit.src"
          [required]="true">
        </app-input-text>
      </div>
      <div class="flex flex-col grow">
        <div class="flex flex-row mt-2 justify-start items-center gap-2">
          <app-simple-helper [position]="'right'" [text]="'Enables link when clicked'"></app-simple-helper>
          <span class="block font-semibold text-lg">Link</span>
        </div>
        <app-input-text
          [id]="'component-link'"
          [(value)]="viewToEdit.link"
          [required]="false">
        </app-input-text>
      </div>
    </div>
  </ng-container>

  <!--------------------- Icon options --------------------->
  <ng-container *ngIf="viewToEdit.type === ViewType.ICON">
    <div class="flex flex-row mt-2 justify-start items-center gap-2">
      <span class="block font-semibold text-mg">Choose Icon <span class="text-secondary">*</span></span>
    </div>
    <div class="flex flex-wrap">
      <div *ngFor="let icon of getIcons()" class="btn btn-ghost -py-2 px-1" (click)="selectIcon(icon, true)" [ngClass]="{'outline outline-2 outline-primary': this.viewToEdit.icon == icon}">
        <ng-icon [name]="icon" [size]="'1.8rem'"></ng-icon>
      </div>
    </div>
    <app-input-select
      [id]="'component-icon'"
      [(value)]="viewToEdit.size"
      [options]="getIconSizeOptions()"
      [placeholder]="'Select component type'"
      [topLabel]="'Select size for your icon'"
      [helperText]="'Will display the icon bigger or smaller. Default is medium size.'"
      [helperPosition]="'right'"
      [required]="true"
      [search]="false">
    </app-input-select>
  </ng-container>

  <!--------------------- Block options --------------------->
  <ng-container *ngIf="viewToEdit.type === ViewType.BLOCK">
    <div class="flex flex-row">
      <div>
        <div class="flex flex-row mt-2 justify-start items-center gap-2">
          <app-simple-helper [position]="'right'" [text]="'Choose whether the components inside will be displayed horizontal or vertically.'"></app-simple-helper>
          <span class="block font-semibold text-md">Direction</span>
        </div>
        <div class="flex flex-wrap">
          <app-input-radio
            [id]="'block-direction-horizontal'"
            [group]="'direction'"
            [optionValue]="'horizontal'"
            [(value)]="viewToEdit.direction"
            [color]="'primary'"
            [classList]="'mr-8'"
            [label]="'Horizontal'">
          </app-input-radio>
          <app-input-radio
            [id]="'block-direction-horizontal'"
            [group]="'direction'"
            [optionValue]="'vertical'"
            [(value)]="viewToEdit.direction"
            [color]="'primary'"
            [classList]="'mr-8'"
            [label]="'Vertical'">
          </app-input-radio>
        </div>
      </div>
      <app-input-number
        *ngIf="viewToEdit.direction == 'horizontal'"
        [id]="'block-columns'"
        [(value)]="viewToEdit.columns"
        [placeholder]="'Select number of columns'"
        [topLabel]="'Columns'"
        [minValue]="1"
        [helperText]="'Chose in how many columns you want to divide the block.'"
        [helperPosition]="'right'">
      </app-input-number>
      <div class="ml-8">
        <div class="flex flex-row my-2 justify-start items-center gap-2">
          <app-simple-helper [position]="'right'" [text]="'Make it adjust automatically to the width and height of the rendering device.'"></app-simple-helper>
          <span class="block font-semibold text-md">Responsiveness</span>
        </div>
        <app-input-checkbox
          [id]="'block-responsive'"
          [(value)]="viewToEdit.responsive"
          [color]="'primary'"
          (valueChange)="viewToEdit.responsive = !viewToEdit.responsive"
          [label]="'Make it responsive'"
          [labelPosition]="'right'">
        </app-input-checkbox>
      </div>
    </div>
  </ng-container>

  <!--------------------- Collapse options --------------------->
  <ng-container *ngIf="viewToEdit.type === ViewType.COLLAPSE">
    <app-input-select
      [id]="'collapse-icon'"
      [(value)]="viewToEdit.collapseIcon"
      [options]="getCollapseIconOptions()"
      [topLabel]="'Icon'"
      [helperText]="'Icon that will be displayed in collapse when opened/closed.'"
      [helperPosition]="'right'"
      [required]="true"
      [search]="false">
    </app-input-select>
    <div class="flex flex-row gap-10">
      <div class="grow">
        <app-input-select
          [id]="'collapse-header-type'"
          [(value)]="viewToEdit.header.type"
          [options]="getComponentTypes()"
          [placeholder]="'Select component type'"
          [topLabel]="'Header Component Type'"
          [helperText]="'Select the type of component you want to be showing.'"
          [helperPosition]="'right'"
          [required]="true">
        </app-input-select>
      </div>
      <div class="grow">
        <app-input-select
          [id]="'collapse-content-type'"
          [(value)]="viewToEdit.content.type"
          [options]="getComponentTypes()"
          [placeholder]="'Select component type'"
          [topLabel]="'Content Component Type'"
          [helperText]="'Select the type of component you want as content.'"
          [helperPosition]="'right'"
          [required]="true">
        </app-input-select>
      </div>
    </div>
  </ng-container>

  <!--------------------------------------------------->
  <!--------------------- GENERAL --------------------->
  <!--------------------------------------------------->
  <div *ngIf="viewToEdit.type !== ViewType.ROW" class="divider"></div>
  <div class="prose">
    <h3 class="flex gap-2 items-center"><ng-icon name="tabler-settings" size="1.5rem"/>General Configuration</h3>
  </div>
  <div class="flex flex-row gap-10">
    <div class="mt-2">
      <div class="flex flex-row justify-start items-center gap-2">
        <app-simple-helper 
        [position]="'right'" 
        [text]="'Define auxiliary variables to simplify the writing of expressions. They will also be available for any children of this component.'"></app-simple-helper>
        <span class="block font-semibold text-md">Auxiliary Variables</span>
      </div>
      
      <!-- Variables -->
      <div class="flex flex-col gap-2 mb-2 grow-0">
        <!-- Existing -->
        <div *ngFor="let variable of viewToEdit.variables; index as i">
          <app-aux-var-card [variable]="variable" (deleteEvent)="deleteAuxVar(i)" (updateEvent)="updateAuxVar($event, i)"/>
        </div>
        <!-- New -->
        <app-aux-var-card [new]="true" (createEvent)="addAuxVar($event)"/>
      </div>

      <!-- Data Iteration -->
      <app-input-text
        [id]="'design-id'"
        [(value)]="viewToEdit.loopData"
        [topLabel]="'Data Iteration'"
        [helperText]="'Determines how many times this component will be repeated.
          \n E.g. {skillTrees.trees} Means that this component will be repeated the number of skill trees available in this 
          course. If there are 3 skill trees in the course, the text will be repeated 3 times.'"
        [helperPosition]="'right'"
        [placeholder]="'e.g. { skillTrees.trees }'"
      ></app-input-text>
    </div>

    <!-- Additional Tools -->
    <div class="h-full w-full">
      <app-input-code
        [id]="'component-tools'"
        [title]="'Additional Tools'"
        [tabs]="additionalToolsTabs"
        [classList]="'grow'"
      ></app-input-code>
    </div>
  </div>

  <!-- Events -->
  <ng-container *ngIf="viewToEdit.type !== ViewType.ROW"> <!----------------------------->

    <div class="flex flex-row mt-2 justify-start items-center gap-2">
      <app-simple-helper 
        [position]="'right'" 
        [text]="'Determine actions that will be triggered whenever an event happens.'"></app-simple-helper>
      <span class="block font-semibold text-md">Events</span>
    </div>
    <div class="flex flex-col gap-2 mb-2">
      <!-- Existing -->
      <div *ngFor="let event of viewToEdit.events" class="card bg-base-200 shadow-md flex flex-row p-5 items-end gap-2">
        <div class="w-36">
          <span class="block font-semibold text-md">When:</span>{{event.type}}
        </div>
        <div class="grow">
          <span class="block font-semibold text-md">Do:</span>{{event.action}}
        </div>
      </div>
      <!-- New -->
      <div class="card bg-base-200 shadow-md flex flex-row pb-5 pt-1 px-5 items-end gap-2">
        <div class="w-36">
          <app-input-select
            [id]="'event-when'"
            [(value)]="eventToAdd.type"
            [options]="getEventTypes()"
            [placeholder]="'Select event'"
            [topLabel]="'When:'"
            [search]="false">
          </app-input-select>
        </div>
        <div class="grow">
          <app-input-text
            [id]="'event-do'"
            [(value)]="eventToAdd.action"
            [topLabel]="'Do:'"
            [placeholder]="'{ actions.goToPage(pages.getPageByName(\'Awards\').id, %user) }'"
          ></app-input-text>
        </div>
        <button class="btn btn-secondary" (click)="addEvent()">Add</button>
      </div>
    </div>

  </ng-container> <!----------------------------->


  <!--------------------------------------------------->
  <!--------------------- STYLING --------------------->
  <!--------------------------------------------------->
  <ng-container *ngIf="viewToEdit.type !== ViewType.ROW"> <!----------------------------->

    <div class="divider"></div>
    <div class="prose">
      <h3 class="flex gap-2 items-center"><ng-icon name="tabler-brush" size="1.5rem"/>Styling</h3>
    </div>
    <!-- Visibility -->
    <div class="flex flex-row mt-2 justify-start items-center gap-2">
      <app-simple-helper [position]="'right'" [text]="'Make this component visible/invisible/visible under condition'"></app-simple-helper>
      <span class="block font-semibold text-lg">Visibility</span>
    </div>
    <div class="flex flex-wrap">
      <app-input-radio
        [id]="'visibility-yes'"
        [group]="'visibility'"
        [optionValue]="'visible'"
        [(value)]="viewToEdit.visibilityType"
        [color]="'primary'"
        [classList]="'mr-8'"
        [label]="'Visible'">
      </app-input-radio>

      <app-input-radio
        [id]="'visibility-no'"
        [group]="'visibility'"
        [optionValue]="'invisible'"
        [(value)]="viewToEdit.visibilityType"
        [color]="'primary'"
        [classList]="'mr-8'"
        [label]="'Not visible'">
      </app-input-radio>

      <app-input-radio
        [id]="'visibility-condition'"
        [group]="'visibility'"
        [optionValue]="'conditional'"
        [(value)]="viewToEdit.visibilityType"
        [color]="'primary'"
        [classList]="'mr-8'"
        [label]="'Visible under condition'">
      </app-input-radio>
    </div>
    <div *ngIf="viewToEdit.visibilityType == 'conditional'" class="mb-5">
      <span class="text-xs pl-1">
        Write an expression that makes this component visible.
        Don't forget that expressions only work when encapsulated with curvy brackets: {{ '{' }} {{ '}' }}
      </span>
      <app-input-text
        [id]="'visibility-condition-expression'"
        [(value)]="viewToEdit.visibilityCondition"
        [placeholder]="'e.g. { %userLevel.number < %nrLevels-1 }'"
        [required]="false">
      </app-input-text>
    </div>
    
    <!-- Interface Design -->
    <div class="flex flex-row mt-2 justify-start items-center gap-2">
      <app-simple-helper [position]="'right'" [text]="'Use this section to style how the component should look like'"></app-simple-helper>
      <span class="block font-semibold text-lg">Interface Design</span>
    </div>
    <div class="w-full flex flex-col md:flex-row gap-10">
      <div class="md:w-1/2">
        <app-input-text
          [id]="'design-id'"
          [(value)]="viewToEdit.cssId"
          [topLabel]="'ID'"
          [helperText]="'Html\'s ID tag'"
          [helperPosition]="'right'"
        ></app-input-text>
        <app-input-text
          [id]="'design-class'"
          [(value)]="viewToEdit.classList"
          [topLabel]="'Class'"
          [helperText]="'Html\'s Class tag'"
          [helperPosition]="'right'"
        ></app-input-text>
        <app-input-text
          [id]="'design-style'"
          [(value)]="viewToEdit.style"
          [topLabel]="'Style'"
          [helperText]="'Html\'s Style tag'"
          [helperPosition]="'right'"
        ></app-input-text>
      </div>
      <div class="grow flex flex-col">
        <div class="flex flex-row items-center mb-2">
          <span class="block font-semibold pl-1 py-1">Preview</span>
          <button class="ml-auto btn btn-sm btn-secondary" (click)="reloadPreview()">
            Reload
            <ng-icon name="feather-refresh-ccw" size="1rem" color="white" class="ml-2" />
          </button>
        </div>
        <div class="flex grow p-5 border-2 border-base-content overflow-y-auto rounded-xl items-center justify-center">
          <bb-any *ngIf="show" [view]="viewToPreview"></bb-any>
          <app-spinner *ngIf="!show" [size]="'lg'"></app-spinner>
        </div>
      </div>
    </div>

    <!-- Table Layout Settings -->
    <div *ngIf="viewToEdit.type === ViewType.TABLE">
      <div class="flex flex-row mt-2 justify-start items-center gap-2">
        <app-simple-helper [position]="'right'" [text]="'Customize table layout'"></app-simple-helper>
        <span class="block font-semibold text-lg">Table Layout Settings</span>
      </div>
      <div class="flex flex-wrap gap-x-5">
        <app-input-checkbox
          [id]="'table-footers'"
          [(value)]="viewToEdit.footers"
          [color]="'primary'"
          [label]="'Add footers'"
          [labelPosition]="'right'">
        </app-input-checkbox>
        <app-input-checkbox
          [id]="'table-searching'"
          [(value)]="viewToEdit.searching"
          [color]="'primary'"
          [label]="'Allow overall searching'"
          [labelPosition]="'right'">
        </app-input-checkbox>
        <app-input-checkbox
          [id]="'table-filtering'"
          [(value)]="viewToEdit.columnFiltering"
          [color]="'primary'"
          [label]="'Allow column filtering'"
          [labelPosition]="'right'">
        </app-input-checkbox>
        <app-input-checkbox
          [id]="'table-paging'"
          [(value)]="viewToEdit.paging"
          [color]="'primary'"
          [label]="'Show number of pages'"
          [labelPosition]="'right'">
        </app-input-checkbox>
        <app-input-checkbox
          [id]="'table-info'"
          [(value)]="viewToEdit.info"
          [color]="'primary'"
          [label]="'Show number of entries/page'"
          [labelPosition]="'right'">
        </app-input-checkbox>
        <app-input-checkbox
          [id]="'table-lengthChange'"
          [(value)]="viewToEdit.lengthChange"
          [color]="'primary'"
          [label]="'Allow customization of nÂº entries/page'"
          [labelPosition]="'right'">
        </app-input-checkbox>
        <app-input-checkbox
          [id]="'table-ordering'"
          [(value)]="viewToEdit.ordering"
          [color]="'primary'"
          [label]="'Allow ordering customization'"
          [labelPosition]="'right'">
        </app-input-checkbox>
      </div>
    </div>
    
  </ng-container> <!----------------------------->

  <div *ngIf="saveButton" class="flex w-full gap-2 mt-5">
    <button class="ml-auto btn btn-ghost" (click)="initViewToEdit()">Discard</button>
    <button class="btn btn-primary" (click)="saveView()">Save</button>
  </div>

</div>
</ng-template>


<!--------------------------------------------------->
<!---------------- EDITOR FOR TABLES ---------------->
<!--------------------------------------------------->
<ng-template #TABLE_EDITOR>
  <div class="flex flex-row">
    <button class="btn rounded-b-none border-none text-base-content {{tableSelectedTab == 'Overall' ? 'bg-base-300 hover:bg-base-300' : 'bg-base-100 hover:bg-base-200'}}" 
            (click)="tableSelectedTab = 'Overall'">Overall</button>
    <button class="btn rounded-b-none border-none text-base-content {{tableSelectedTab == 'Rows' ? 'bg-base-300 hover:bg-base-300' : 'bg-base-100 hover:bg-base-200'}}" 
            (click)="tableSelectedTab = 'Rows'">Rows</button>
    <button class="btn rounded-b-none border-none text-base-content {{tableSelectedTab == 'Cells' ? 'bg-base-300 hover:bg-base-300' : 'bg-base-100 hover:bg-base-200'}}" 
            (click)="tableSelectedTab = 'Cells'">Cells</button>
  </div>
  <div class="bg-base-300 rounded-xl p-6 {{tableSelectedTab == 'Overall' && 'rounded-tl-none'}}">
    <ng-container *ngIf="tableSelectedTab == 'Overall'" [ngTemplateOutlet]="GENERIC_EDITOR"></ng-container>

    <!--------------------- Rows Tab --------------------->
    <ng-container *ngIf="tableSelectedTab == 'Rows'">
      <span class="block font-semibold text-lg mb-2">Current Rows:</span>
      <div class="flex flex-col gap-2">
        <span>Header</span>
        <div *ngFor="let row of this.viewToEdit.headerRows; index as i" class="flex flex-row items-center">
          <div class="w-full rounded-md border border-dashed border-neutral/50 p-2 text-center mr-2">Row {{row.uniqueId}}</div>
          <button class="btn btn-ghost rounded-full p-1" (click)="deleteHeaderRow(i)"><ng-icon name="feather-X" size="1.5rem" color="red"/></button>
        </div>
        <button *ngIf="this.viewToEdit.headerRows.length <= 0" class="btn btn-secondary" (click)="addHeaderRow(0)">Add Header Row</button>
        <div class="divider"></div>
        <span>Body</span>
        <div *ngFor="let row of this.viewToEdit.bodyRows; index as i">
          <div class="flex flex-row items-center">
            <div class="w-full rounded-md border border-dashed border-neutral/50 p-2 text-center mr-2">Row {{row.uniqueId}}</div>
            <button class="btn btn-ghost rounded-full p-1" (click)="moveBodyRow(i, i-1)"><ng-icon [name]="'tabler-arrow-narrow-up'" [size]="'1.5rem'"/></button>
            <button class="btn btn-ghost rounded-full p-1" (click)="moveBodyRow(i, i+1)"><ng-icon [name]="'tabler-arrow-narrow-down'" [size]="'1.5rem'"/></button>
            <button class="btn btn-ghost rounded-full p-1" (click)="addBodyRow(i)"><ng-icon [name]="'tabler-row-insert-top'" [size]="'1.5rem'"/></button>
            <button class="btn btn-ghost rounded-full p-1" (click)="addBodyRow(i+1)"><ng-icon [name]="'tabler-row-insert-bottom'" [size]="'1.5rem'"/></button>
            <button class="btn btn-ghost rounded-full p-1" (click)="selectRow(row)"><ng-icon [name]="'jam-pencil'" [size]="'1.5rem'"/></button>
            <button class="btn btn-ghost rounded-full p-1" (click)="deleteBodyRow(i)"><ng-icon name="feather-X" size="1.5rem" color="red"/></button>
          </div>
          <!-- Row editor -->
          <div *ngIf="row === rowToEdit" class="bg-base-100 my-4 rounded-xl p-6">
            <app-component-editor [view]="rowToEdit" [saveButton]="true"/>
          </div>
        </div>
        <button *ngIf="this.viewToEdit.bodyRows?.length <= 0" class="btn btn-secondary" (click)="addBodyRow(0)" >Add Body Row</button>
      </div>

    </ng-container>

    <!--------------------- Cells Tab --------------------->
    <ng-container *ngIf="tableSelectedTab == 'Cells'">
      <span class="block font-semibold text-lg mb-2">Current Cells:</span>
      <div class="flex flex-col gap-2">
        <div class="flex flex-row items-center gap-3 divide-x-2 divide-base-100">
          <div *ngFor="let col of [].constructor(getNumberOfCols()); index as i" class="w-full flex justify-center">
            <button class="shrink btn btn-ghost rounded-full p-0" (click)="moveColumn(i, i-1)"><ng-icon [name]="'tabler-arrow-narrow-left'" [size]="'1.5rem'"/></button>
            <button class="shrink btn btn-ghost rounded-full p-0" (click)="moveColumn(i, i+1)"><ng-icon [name]="'tabler-arrow-narrow-right'" [size]="'1.5rem'"/></button>
            <button class="shrink btn btn-ghost rounded-full p-0" (click)="addColumn(i)"><ng-icon [name]="'tabler-column-insert-left'" [size]="'1.5rem'"/></button>
            <button class="shrink btn btn-ghost rounded-full p-0" (click)="addColumn(i+1)"><ng-icon [name]="'tabler-column-insert-right'" [size]="'1.5rem'"/></button>
            <button class="shrink btn btn-ghost rounded-full p-0" (click)="deleteColumn(i)"><ng-icon name="feather-X" size="1.5rem" color="red"/></button>
          </div>
        </div>
        <span>Header</span>
        <div *ngFor="let row of this.viewToEdit.headerRows; index as i" class="flex flex-row items-center gap-3">
          <div *ngFor="let cell of this.viewToEdit.headerRows[i].children;" 
                class="w-full rounded-md border border-dashed border-neutral/50 p-2 text-center hover:cursor-pointer {{cell === cellToEdit ? 'bg-base-100' : 'transition hover:bg-base-100'}}"
                (click)="selectCell(cell)">
              {{$any(cell).text ?? "Cell"}}
          </div>
        </div>
        <button *ngIf="getNumberOfCols() <= 0 && this.viewToEdit.headerRows?.length > 0" class="btn btn-secondary" (click)="addColumn(0)" >Add Column</button>
        <div class="divider"></div>
        <span>Body</span>
        <div *ngFor="let row of this.viewToEdit.bodyRows; index as i" class="flex flex-row items-center gap-3">
          <div *ngFor="let cell of this.viewToEdit.bodyRows[i].children;" 
                class="w-full rounded-md border border-dashed border-neutral/50 p-2 text-center hover:cursor-pointer {{cell === cellToEdit ? 'bg-base-100' : 'transition hover:bg-base-100'}}"
                (click)="selectCell(cell)">
            Cell
          </div>
        </div>
        <button *ngIf="getNumberOfCols() <= 0 && this.viewToEdit.bodyRows?.length > 0" class="btn btn-secondary" (click)="addColumn(0)" >Add Column</button>
      
        <!-- Cell editor -->
        <div *ngIf="cellToEdit" class="mt-10 bg-base-100 rounded-xl p-6">
          <div class="prose">
            <h3>Edit cell</h3>
          </div>
          <app-component-editor [view]="cellToEdit" [saveButton]="true"/>
        </div>
      </div>
    </ng-container>

  </div>
</ng-template>