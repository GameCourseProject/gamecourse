<div id="viewEditor">
  <ng-container *ngIf="!loading">

    <!-- Helper -->
    <div class="side_helper">
      <div id="open_helper" (click)="help = !help; clickedHelpOnce = true">
        <span class="help icon"></span>
        <span id="arrow" class="open icon"></span>
      </div>
      <div id="helper_content" [ngClass]="{'visible': help, 'invisible': !help && clickedHelpOnce}">
        <span><a target="_blank" [routerLink]="'/docs/views'">About Views</a></span>
        <span><a target="_blank" [routerLink]="'/docs/functions'">Available Functions</a></span>
      </div>
    </div>

    <!-- Breadcrumbs -->
    <div id="page_history">
      <span class="clickable" (click)="goToViews()">Views</span>
      <div class="go_back icon" (click)="goToViews()"></div>

      <span class="clickable" (click)="goToViews()">Templates</span>
      <div class="go_back icon"></div>

      <span>{{template.name}}</span>
      <span id="warning_ref">The selected view is a reference for a template!</span> <!-- TODO -->
    </div>

    <!-- Action buttons -->
    <div class="action-buttons" id="view_editor_actions"
         [ngStyle]="{'width': template.roleType === RoleTypeId.ROLE_SINGLE ? '450px' : '650px'}">

      <div class="editor-roles">
        <ng-container *ngIf="template.roleType === RoleTypeId.ROLE_INTERACTION">
          <div style="margin-right:5px;">User: </div>
          <select id="user_role" [(ngModel)]="selectedUserRole" (ngModelChange)="getTemplateEditView(template, selectedViewerRole, selectedUserRole)">
            <option *ngFor="let role of getRoles('user')" [ngValue]="role.name">{{role.name}}</option>
          </select>
        </ng-container>

        <div style="margin-right:5px;">View as: </div>
        <select id="viewer_role" [(ngModel)]="selectedViewerRole" (ngModelChange)="getTemplateEditView(template, selectedViewerRole, selectedUserRole)">
          <option *ngFor="let role of getRoles('viewer')" [ngValue]="role.name">{{role.name}}</option>
        </select>
      </div>

      <div id="undo_icon" class="icon undo_icon" [ngClass]="{'disabled': !canUndo()}" title="Redo"></div>
      <div id="redo_icon" class="icon redo_icon" [ngClass]="{'disabled': !canRedo()}" title="Redo"></div>

      <button>Save Changes</button>
      <button>Preview</button>
    </div>

    <!-- Editor -->
    <div class="editor">
      <bb-any *ngIf="view" [view]="view"></bb-any>
      <div class="no-view" *ngIf="!view">(Empty view)</div>
    </div>

  </ng-container>

  <!-- Loader -->
  <div *ngIf="loading" id="page-loading">
    <img src="../../../../../../../assets/loader/loader.gif" alt="loader">
  </div>
</div>
